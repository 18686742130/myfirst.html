<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        #small{
            position: relative;
            width: 400px;
            height: 400px;
            float: left;

        }
        /*#small img{*/
            /*width: 400px;*/
            /*height: 400px;*/
        /*}*/
        #drag{
            width: 200px;
            height: 200px;
            background: #CCCCCC;
            opacity: 0.5;
            filter:alpha(opacity:50);
            position: absolute;
            top: 0;
            left: 0;
            display: none;
        }
        #big{
            width: 400px;
            height: 400px;
            overflow: hidden;
            float: left;
            display: none;
        }
        #tm{
            width: 400px;
            height: 400px;
            background-color: #fff;
            opacity: 0;
            z-index: 1;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
<div id="small">
    <div id="tm"></div>
    <div id="drag"></div>
    <img src="5.jpg" alt=""/>
</div>
<div id="big">
    <img id="big-pic" src="6.jpg" alt=""/>
</div>
<script>
    var oSmall = document.getElementById('small');
    var oDrag = document.getElementById('drag');
    var oBig = document.getElementById('big');
    var oBigPic = document.getElementById('big-pic');
    var oTm = document.getElementById("tm");
    oTm.onmouseover = function(){
        oBig.style.display='block';
        oDrag.style.display = 'block';
        console.log(1);
    };
    oTm.onmousemove = function(e){
        e = e||window.event;
        var disX = e.clientX-oDrag.offsetWidth/2 ;
        var disY = e.clientY-oDrag.offsetHeight/2 ;
        if(disX<0){
            disX=0;
        }
        else if(disX>oSmall.offsetWidth-oDrag.offsetWidth){
            disX=oSmall.offsetWidth-oDrag.offsetWidth;
        }
        if(disY<0){
            disY=0;
        }
        else if(disY>oSmall.offsetHeight-oDrag.offsetHeight){
            disY=oSmall.offsetHeight-oDrag.offsetHeight;
        }
        oDrag.style.left  = disX+"px";
        oDrag.style.top = disY+"px";
        console.log(1);
    };
    oSmall.onmouseout = function(){
        oBig.style.display='none';
        oDrag.style.display = 'none';
    }
</script>
</body>
</html>